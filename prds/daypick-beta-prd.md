
# Product Requirements Document - DayPick

**Author:** User
**Date:** 2026-01-15T22:50:24+08:00

## Executive Summary

DayPick 是一款 **Android 优先** 的 **Local-first / Offline-first / 无登录** 的个人工作台：围绕“今天”把 `收集 → 处理 → 计划 → 专注 → 留痕 → 回顾` 做成低摩擦闭环。MVP/Beta 阶段明确定位为 **单设备隐私党**（暂不考虑多端同步），并将 AI 作为“只在你触发时工作”的可控工具台。

当前 beta 的关键方向聚焦在：

- **专注今天任务**：把 Today 变成“可执行容器”，而不是 Backlog
- **围绕任务的处理**：提供 Inbox/待处理与日常处理路径，降低整理成本与上下文切换
- **长篇笔记 + 闪念笔记**：闪念用于快速收下；长文用于沉淀输出；支持“编织”迁移（可组合、可单独使用）
- **模块可组合**：各 Tab 能力允许重排/隐藏/预设，不做强绑定与强限制

### What Makes This Special

1) **本地优先的信任基础设施**：无登录、离线可用；导出/加密备份/恢复/清空构成可迁移、可审计的数据掌控面。  
2) **Today-first 的执行体验**：下一步、今天计划、专注与回顾天然围绕“今天”组织，帮助用户随时回到可执行状态。  
3) **双形态笔记 + 编织**：允许“先记录，后整理”，并把闪念低摩擦转化为任务/长文沉淀。  
4) **AI 可控可信**：AI 输出默认是建议，遵循预览→编辑→采用/撤销；问答/复盘坚持 Evidence-first（引用可跳转，证据不足即不足）。

## Project Classification

**Technical Type:** mobile_app  
**Domain:** general  
**Complexity:** high（交付复杂度：本地数据/搜索索引/加密备份恢复/后台通知与状态恢复/AI 护栏与证据链/可组合工作台）  
**Project Context:** Brownfield - extending existing system

## Success Criteria

### User Success

用户成功的核心不是“功能多”，而是把 **Today×任务处理×专注×留痕×回顾** 做成低摩擦闭环，并让用户感到“清晰、掌控、可信”。

- **3-2-10 核心闭环可达成**：用户能在 `3 秒`内看清下一步；`2 步`内开专注；番茄结束后 `10 秒`内完成留痕（手写或 AI 草稿）并回填任务。
- **Today 作为执行中枢**：默认落点是 Today；用户打开即进入“可执行状态”，而不是 Backlog 海洋。
- **捕捉不打断**：一句话即可收下（任务/闪念/笔记草稿至少覆盖任务与闪念），捕捉不会强迫用户当下整理。
- **编织带来“产出感”**：短篇闪念能低摩擦编织进长文（或转成任务），且保留引用来源，避免“记录变死档案”。
- **专注可靠且安静**：专注期间不喧闹、不频繁打断；到点提醒稳定；被杀/重启后状态能恢复且用户不怀疑计时可信度。
- **隐私与掌控感**：用户清晰知道数据在本地、如何备份、如何恢复、如何清空；AI 只在明确触发时工作，且发送范围透明可控。

### Business Success

在无登录、单设备 MVP/Beta 前提下，业务成功优先以“验证产品价值与形成自传播”衡量（而非增长黑客式指标）。

- **价值验证（Activation）**：首次使用能完成一次 3-2-10 闭环（Today→Focus→留痕回填），并愿意继续把“今天”交给 DayPick。
- **习惯形成（Habit）**：用户把 DayPick 当作“每日开工入口”，高频使用 Today 与 Focus；任务完成与专注留痕形成可回顾证据。
- **信任建立（Trust）**：用户愿意使用导出/加密备份/恢复；愿意在需要时配置 BYO Key 启用 AI（而不是因为不信任而回避）。
- **可分享产出（Shareability）**：用户愿意导出/分享“日复盘/周复盘/工作日志”到外部工具（作为个人工作故事与成果证明）。

### Technical Success

技术成功的目标是：Local-first 的稳定性与可信度“像系统能力一样可靠”，并为后续组合能力扩展留好结构。

- **可靠性**：核心路径（Today/Tasks/Focus/Notes/AI）无阻塞；关键操作可撤销（至少对批量/导入/AI 采用类操作）。
- **离线优先**：离线情况下仍可捕捉、整理、专注、留痕、回顾；AI 相关动作失败不影响主流程（仅提示并提供下一步）。
- **数据完整性**：导出/备份/恢复具备原子性与校验；恢复前强制“安全备份包”；失败可回滚或至少可解释且可继续。
- **通知与状态恢复**：Android 后台提醒在常见省电/权限路径下有清晰兜底策略；应用重启后能恢复进行中的专注状态与倒计时。
- **性能**：Today 进入与列表滚动保持顺滑；本地搜索与索引在任务/笔记量增长后仍可用（“可用”先于“极致快”）。
- **隐私护栏**：无用户触发时不上传内容；AI 请求具备“将发送什么/到哪里/为什么”预览；敏感内容默认最小化发送。

### Measurable Outcomes

以“可验收”方式定义的结果（不作为硬 SLA，但需要可回归验证）：

- **Time-to-next-action**：打开应用到“可开始专注/下一步清晰”的路径不超过 `3 秒`（目标体验基线）。
- **Time-to-focus**：从 Today/任务详情进入 Focus 并开始计时不超过 `2 次显式操作`。
- **Wrap-up friction**：番茄结束后从弹出收尾到完成保存/回填，`10 秒`内可完成（允许“稍后补”，但不丢证据）。
- **Trust guardrails**：AI 无 key/无网/限流/超时均不阻塞主流程；错误提示遵循“结论一句话 + 人话原因 + 下一步按钮”。

## Product Scope

### MVP - Minimum Viable Product

MVP/Beta 以“单设备隐私党”的闭环可用为第一目标（不做多端同步）：

- **Today Workbench（可执行容器）**：Next Step / Today Plan / Review 的默认组合，支持模块开关/重排（不强绑定但提供最佳默认）。
- **任务处理链路**：Inbox/待处理 → 澄清（拆分/补充）→ 加入今天 → 执行；基础搜索/筛选可用。
- **专注闭环**：任务绑定番茄；到点提醒；结束后 10 秒留痕（手写/草稿/可 AI 加速）并回填任务。
- **双形态笔记**：闪念（快速卡片/碎片）+ 长文（沉淀输出）；支持“编织”（闪念→长文段落/闪念→任务）。
- **AI 可控工具台**：拆任务/今天计划/复盘/问答 Evidence-first；所有结果均“预览→编辑→采用/撤销”；失败不阻塞。
- **本地信任基础设施**：导出、加密备份、恢复、隐私清空；对外发送（分享/AI）透明可控。
- **UI/UE/UX 一致性**：Shadcn UI Flutter 作为底盘；统一 App Shell、层级、排版与提示策略（Calm Productivity）。

### Growth Features (Post-MVP)

- **Quick Create 字段增强**：结构化补充 `优先级 / 到期 / 预计番茄`（不做自然语言解析）。
- **全局搜索**：任务/笔记/专注记录统一检索与跳转（含 Evidence 引用跳转）。
- **轻量时间块 / 预算**：以“预计时长/番茄预算”帮助用户把今天计划做得现实（不引入日历同步也可用）。
- **更强的工作台组合**：预设模板（如“深度工作日/会议日/复盘日”）、更细粒度模块与快捷动作编排。

### Vision (Future)

- **多设备与同步（明确不在当前 MVP/Beta）**：可选的端到端加密同步/备份方案（仍坚持隐私与可控）。
- **日历/外部系统集成**：把 Today 的计划与时间块与外部日历/待办源连接（以不破坏“安静执行”体验为前提）。
- **更强的知识网络**：任务/笔记/复盘的链接、引用与可视化，让“工作证据”可复用与可沉淀。

## Beta Priorities（3×P0 + 3×P1）

> 约束：单设备隐私党（Local-first / Offline-first / 无登录），暂不考虑多端同步。

### Beta 关键确认项（已拍板）

- **导航**：支持在设置里选择默认入口 Tab；默认入口为中间第 3 个 Tab（Today），且 Today 按钮更突出（更大/更可触达）。
- **捕捉入口**：AppBar 右上角 `＋`（Quick Create），任意 Tab 一键唤起。
- **捕捉类型（P0）**：`任务 / 闪念 Memo / 长文草稿` 三种都必须支持，且离线可用。
- **Inbox 定义（4C）**：只有 Quick Create 创建的内容默认先进入 `待处理/Inbox`（任务可选“创建后直接加入今天”以减少处理步数）；其它入口创建默认视为已处理（不进入 Inbox）。
- **处理动作（全量）**：澄清编辑、拆分子任务、加入今天、延期、归档、编织进长文收集箱（默认引用）。
- **Today 计划**：手动排序 + 建议填充；并提供“可解释的自动结转/自动进入”（默认不黑盒污染 Today）。
- **Focus 收尾**：必须支持“进展 + 下一步 + 加入今天”（允许稍后补，但先落草稿证据）。
- **AI 策略**：AI 默认可见；无 key/无网时提供“离线草稿”（模板/确定性生成）不阻塞主流程。
- **统计/热力图**：本地统计 + 可导出，但默认关闭。

### P0（必须做：决定 Beta 是否成立）

1) **Today 执行闭环打穿（Capture → Process → Plan → Focus → Trace）**  
   - Today Workbench：Next Step Hero + Today Plan（控量 3–5）+（可选）This Evening 分段  
   - Inbox/待处理：清空路径（澄清/拆分/延期/加入今天）  
   - Focus + Wrap-up：到点稳定提醒；10 秒留痕草稿不丢并回填任务  

2) **双形态笔记 + 编织（Memo/Jots → Longform / Task）**  
   - 闪念打开即写、可标记已处理；一键转任务/编织进长文“收集箱段落”  
   - 编织以“引用关系”为主：保留来源与跳转，避免复制导致分叉失真  

3) **信任与 Calm UX 底盘（本地可控 + UI 一致）**  
   - 数据掌控路径：导出/加密备份/恢复/清空（可解释、可继续）  
   - UI/UE/UX：Shadcn UI Flutter 作为统一设计语言（App Shell/层级/提示结构一致）  
   - AI 护栏：仅用户触发；发送预览；结果“预览→编辑→采用/撤销”；失败不阻塞  

### P1（体验增强：更快、更可找回、更像“节奏”）

1) **更快捕捉（Quick Create + 系统级入口）**  
   - Quick Create：结构化字段（优先级/到期/预计番茄），不做自然语言解析  
   - 入口：Android 小组件/快捷方式/通知栏入口（至少 1–2 个）  

2) **全局搜索与过滤（任务/笔记/闪念/专注留痕）**  
   - 统一入口 + 统一过滤（时间/标签/类型）  
   - 为 Evidence-first 与回顾触发提供底座（可跳转引用）  

3) **今天节奏可视化（不做多端日历同步）**  
   - Today 计划支持番茄预算/预计时长；（可选）轻量时间块视图  
   - 所有建议/投影“可解释、可编辑、可撤销”，避免黑盒安排  

## User Journeys

### Journey 1：忙碌的知识工作者 —— 把“今天”收敛成下一步（Today 执行驾驶舱）

他每天打开手机的第一感受不是“我有多少任务”，而是“今天到底该先做哪一个”。任务来自会议、聊天、脑内临时想法，堆在一起时会迅速把注意力击穿：他不缺 To-do，他缺“下一步”。

他打开 DayPick，直接落在 Today：上半屏只给一个明确的 **Next Step（主焦点）**，下面是可编辑的 **今天计划队列**。他不需要先整理全局 Backlog，只要把今天能推进的 3–5 件事装进队列，就能立刻进入执行（他要的是“收敛”，不是“全景”）。

当他点下“开始专注”，计时器安静、可靠，不要求更多设置；到点后弹出一个极短的收尾面板，他用一句话留下进展（或点一下生成 AI 草稿再编辑）并回填任务。回到 Today，他看到的不再是“空白的一天”，而是“我做成了什么 + 下一步是什么”。这让 DayPick 成为他的开工入口，而不是一个需要维护的工具。

**竞品对照补齐（可选，但建议 Beta 支持）**
- 像 Things：Today 里允许一个“节奏分段”（例如 **This Evening/今晚**），把低能量任务推到晚些时候，避免 Today 变成“压力墙”。
- 像 Sunsama/Akiflow：对“未完成”有可控的 **rollover/延期** 与 **overdue 顶置** 语义，Today 保持现实，不被历史拖拽。

**失败/恢复场景（必须写进体验）**
- 今天队列过载：系统建议“收敛到 5 条”，并提供一键“移到以后/归档”。
- 无网/AI 不可用：不影响加入今天/开专注/留痕，只把 AI 相关按钮变为“解释型不可用”。

**This journey reveals requirements for**
- Today = Workbench：Next Step Hero + Today Plan 队列 +（可选）This Evening 分段
- Inbox/Triage：新增任务默认先收下，随后能“澄清/拆分/加入今天/延期”
- 3-2-10 体验基线：3 秒看清下一步；2 步开专注；10 秒留痕回填
- Overdue/Rollover 语义：不让 Today 被历史任务淹没（可配置）

### Journey 2：碎片捕捉者 —— 闪念不再死档案，而能编织成产出（Capture → Weave）

她在通勤/排队/走路时会冒出大量碎片想法：一句话灵感、待办提醒、一个要写进总结的要点。过去她用任何能快速打开的地方记录，但那些记录经常“只被写下，从未被用过”。

在 DayPick，她把这些先当作“闪念”收下：不分类、不格式化、不强迫当场整理；默认只做一个轻动作：加一个 tag（可选），或标记“与某任务相关”（可选）。她要的不是当下变清楚，而是“先别丢”。

当她坐回桌面开始工作时，她打开 Today 的 “Weave/编织” 模块：把几条闪念拖进一篇长文笔记的“收集箱段落”，或一键把其中两条转成任务并加入今天计划。闪念在被编织时保留引用来源（来自哪天、来自哪条闪念、与哪条任务关联），让复盘时能追溯“这个结论从哪来”。

**竞品对照补齐（可选，但建议 Beta 支持）**
- 像 flomo：闪念天然是“卡片”，支持 daily review（随机回看/相关联想），但 DayPick 的差异是“编织到任务与产出”。
- 像 Logseq：给 Daily Template 一个固定位置：Today 里存在“收集箱段落/编织入口”，让碎片长期可用。

**失败/恢复场景（必须写进体验）**
- 闪念过多：提供“已处理/待处理”状态与批量归档（否则很快变成另一个垃圾堆）。
- 编织冲突：同一条闪念被编织到多处时，保留引用而不复制正文，避免分叉失真。

**This journey reveals requirements for**
- Capture：一处输入，支持“任务/闪念/长文草稿”切换（不强制）
- Weave：闪念→长文段落 / 闪念→任务；保留引用来源；已处理状态
- Review：轻量日回顾（只给摘要与触发点，避免 KPI 报表墙）

### Journey 3：深度专注执行者 —— 专注像系统能力一样可靠（含异常路径）（Focus Reliability）

他对番茄工具最敏感的点不是 UI，而是 **可靠性**：到点必须提醒、被切后台不丢、杀进程后能恢复。第一次使用 DayPick 时系统提示通知权限未开启。他仍能开始专注，但应用清楚说明：到点可能只能应用内提示，并给出“去设置开启”的下一步按钮（不阻塞、但不隐瞒）。

某次他专注中切出应用处理紧急消息，回来后计时仍正确；即便系统回收进程，重新打开也能看到“正在专注”的状态与剩余时间，并提供继续/暂停/放弃的明确选择。到点后进入收尾：只做两件事——一句话进展 + 下一步（可选），然后回填任务并回到 Today。

**竞品对照补齐（原则）**
- Calm Tech：专注期的 UI 只占用最小注意力；提示在边缘，不抢主任务；错误提示永远给下一步动作。

**失败/恢复场景（必须写进体验）**
- 权限拒绝 / 省电策略 / DND：给明确兜底策略（例如前台提示、应用内到点提示、可选的“前台服务路径说明”）。
- 到点时用户不方便收尾：允许“稍后补”，但不丢证据（先生成草稿记录）。

**This journey reveals requirements for**
- Timer 状态机：running/paused/break + 恢复逻辑（重启/杀进程）
- 通知兜底策略：权限/省电/DND 下的可预期行为
- Wrap-up Sheet：10 秒可完成；允许“稍后补”但先留草稿证据

### Journey 4：隐私敏感用户 —— 数据在本地、AI 可控、可迁移可清空（Trust & Control）

他不愿登录，也不愿把工作内容交给云端。选择 DayPick 的理由是 Local-first：数据默认在本地，导出/加密备份/恢复/清空都能自助完成。他第一次使用时会先走一遍“数据掌控路径”：导出一份 Markdown/JSON；做一次加密备份；确认恢复流程会先生成安全备份包；确认清空是明确的不可逆操作。

他愿意用 AI，但前提是绝对可控：只有在他点击“AI 拆任务 / AI 今日计划 / AI 复盘”时才会发送；发送前必须可见“将发送什么/到哪里/为什么”，并能编辑要发送的内容范围。网络不可用或 key 未配置时，AI 不会阻塞他继续捕捉、整理与专注；提示给人话原因与下一步动作。

**竞品对照补齐（原则）**
- 像 Obsidian/Logseq：强调“数据是你的”，但 DayPick 要做到“更像产品而不是工具箱”：把导出/备份/恢复/清空做成清晰的路径，而不是散落按钮。

**失败/恢复场景（必须写进体验）**
- 备份包损坏/版本不兼容：必须给摘要、失败原因、可继续方案（例如回退到安全备份包）。
- AI 结果不可信：默认是建议，必须预览/编辑/采用/撤销；Evidence-first（证据不足即不足）。

**This journey reveals requirements for**
- Data Control：导出/加密备份/恢复/清空；恢复前安全备份包；失败可解释可继续
- AI Guardrails：仅用户触发；发送预览；采用可撤销；Evidence-first
- 统一提示结构：结论一句话 + 人话原因 + 下一步按钮（全局一致）

### Journey Requirements Summary

把旅程转成“可实现的能力地图”（后续 FR/NFR 会按此拆解）：

- **Workbench（Today）**：Next Step Hero、Today Plan 队列、Overdue/Rollover/（可选）This Evening 分段、模块可开关与重排
- **Capture & Triage**：一处输入支持任务/闪念/草稿；Inbox/待处理澄清链路；不打断
- **Focus（可靠性优先）**：通知兜底、状态恢复、10 秒收尾留痕草稿不丢
- **Weave（编织）**：闪念→长文段落/→任务；引用来源；已处理状态；轻量回顾触发
- **AI（可控可信）**：预览→编辑→采用/撤销；Evidence-first；失败不阻塞
- **Data Control（信任底盘）**：导出/备份/恢复/清空；恢复前安全备份包；校验与摘要
- **Calm UX（系统质感）**：低噪、层级稳定、触达与可访问性基线、统一信息结构

## Functional Requirements（Beta）

> 细化规格与 50 项任务拆解见：`_bmad-output/planning-artifacts/beta-requirements.md`、`_bmad-output/planning-artifacts/beta-backlog.md`。

### Navigation & App Shell

- 5 Tab 固定顺序：`AI / 笔记 / 今天 / 任务 / 专注`，Today 位于中间且更突出（更大触达区）。
- 支持在设置中选择默认入口 Tab；深链优先于默认入口。
- AppBar 右上角 `＋`（Quick Create）在任意 Tab 可用。

### Quick Create（全局捕捉）

- 三类型：任务 / 闪念 Memo / 长文草稿；类型切换不丢输入内容。
- 4C：仅 Quick Create 默认先收下到 Inbox（待处理）；任务可选“创建后直接加入今天”减少处理步数；非 Quick Create 的上下文内创建默认不进 Inbox。
- 离线可用；错误提示遵循“结论一句话 + 人话原因 + 下一步按钮”。

### Inbox / Triage（处理模式）

- Inbox 聚合展示 Quick Create 产生的未处理条目（任务/Memo/草稿），支持过滤与排序。
- 必须支持 6 个处理动作：澄清编辑、拆分子任务、加入今天、延期、归档、编织进长文收集箱。
- 批量处理与撤销（至少覆盖：批量加入今天/延期/归档/编织）。

### Today Workbench（执行中枢）

- Next Step Hero 规则稳定且可解释（Today Plan 优先；有进行中专注时展示 In Progress）。
- Today Plan：手动排序持久化 + 建议填充；控量 3–5（过载给收敛提示）。
- 可解释结转：对“昨日未完成/延期”给出建议结转，用户确认后进入 Today Plan（默认不自动污染 Today）。

### Focus（可靠性优先）

- 计时状态机可恢复（切后台/杀进程/重启）；到点提醒有多级兜底。
- Wrap-up Sheet 必须包含：进展 + 下一步 + 加入今天（允许稍后补，但先落草稿证据）。

### Notes / Memo / Weave（双形态与编织）

- Note 支持 kind：memo/longform/draft；列表与筛选按 kind 工作。
- 编织默认使用引用卡片（可跳转来源）；可选复制正文但必须保留来源链接。
- 编织目标为长文“收集箱段落”（可定位锚点）。

### AI（可控可信 + 离线草稿）

- AI 默认入口可见；无 key/无网/限流/超时时：提供“离线草稿”（模板/确定性生成）不阻塞主流程。
- 在线 AI：仅用户触发；发送预览可编辑；结果“预览→编辑→采用/撤销”；Evidence-first（能引用则引用，证据不足明确提示）。

### Search & Stats（默认低噪）

- 全局搜索覆盖任务/笔记/Memo/留痕，结果可跳转与过滤（时间/标签/类型）。
- 本地统计与热力图：开关默认关闭；开启后支持导出统计摘要（遵守脱敏策略）。

### Data Control（信任底盘）

- 导出/备份/恢复/清空覆盖新增字段（Note kind、Triage 状态、编织关系）；AI key 不进入导出/备份。
- 恢复前生成安全备份包；失败可解释可继续。

## Non-Functional Requirements（Beta）

### Offline-first & Reliability

- 核心闭环离线可用：捕捉/处理/计划/专注/留痕/编织不依赖网络。
- 关键状态可恢复：Focus 计时状态、未保存草稿、Inbox 处理中的修改不因崩溃丢失。

### Performance

- 大列表可用：Tasks/Inbox/Notes 在数据增大时仍保持滚动与交互顺滑（分页/索引按需引入）。
- 搜索可扩展：本地索引与增量更新，避免每次全量扫描。

### Privacy & Security

- 数据默认本地；导出/备份/恢复/清空路径清晰可解释。
- 备份加密与 key 管理可审计；AI 发送内容范围透明可控。

### UX Consistency & Accessibility

- Calm UX：低噪、层级稳定、统一提示结构；关键触达区满足移动端可用性基线。
- 可访问性：语义标签、触控目标、对比度与动态字体设置不破坏核心路径。
